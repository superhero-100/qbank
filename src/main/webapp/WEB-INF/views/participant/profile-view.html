<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Stats - Qbank</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- TailwindCSS + DaisyUI -->
    <div th:replace="~{/fragments/global-head :: tags}"></div>

</head>

<body class="bg-base-200 text-base-content flex flex-col min-h-screen">

<div th:replace="~{/participant/fragments/header :: tag}"></div>

<main class="container mx-auto px-4 py-8">

    <!-- Welcome -->
    <div class="text-center mb-10">
        <h2 class="text-3xl font-bold">Welcome, <span th:text="${stats.username}">User</span></h2>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-6">
        <div class="stat bg-base-100 shadow-md rounded-xl p-5 text-center">
            <div class="text-sm text-gray-500">Total Exams</div>
            <div class="text-3xl font-bold" th:text="${stats.totalExamsTaken}">0</div>
        </div>

        <div class="stat bg-base-100 shadow-md rounded-xl p-5 text-center">
            <div class="text-sm text-gray-500">Avg. Score</div>
            <div class="text-3xl font-bold" th:text="${#numbers.formatDecimal(stats.averageScore, 0, 2)}">0</div>
        </div>

        <div class="stat bg-base-100 shadow-md rounded-xl p-5 text-center">
            <div class="text-sm text-gray-500">Accuracy</div>
            <div class="text-3xl font-bold" th:text="${#numbers.formatDecimal(stats.averageAccuracy, 0, 1) + '%'}">0%</div>
        </div>

        <div class="stat bg-base-100 shadow-md rounded-xl p-5 text-center md:col-span-1">
            <div class="text-sm text-gray-500">Questions Attempted</div>
            <div class="text-3xl font-bold" th:text="${stats.totalQuestionsAttempted}">0</div>
        </div>

        <div class="stat bg-base-100 shadow-md rounded-xl p-5 text-center md:col-span-1">
            <div class="text-sm text-gray-500">Correct Answers</div>
            <div class="text-3xl font-bold" th:text="${stats.totalCorrectAnswers}">0</div>
        </div>
    </div>

    <!-- Recent Exams -->
    <div class="mt-12">
        <h4 class="text-xl font-semibold mb-4">Recent Exams</h4>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" th:if="${!#lists.isEmpty(stats.recentExams)}">
            <div th:each="exam : ${stats.recentExams}" class="card bg-base-100 shadow-md p-5 h-full">
                <h5 class="text-lg font-semibold mb-2" th:text="${exam.examDescription}">Mock Exam</h5>
                <p class="text-sm leading-relaxed">
                    <strong>Subject:</strong> <span th:text="${exam.subjectName}">Math</span><br>
                    <strong>Score:</strong> <span th:text="${exam.score}">85%</span><br>
                    <strong>Accuracy:</strong>
                    <span th:text="${#numbers.formatDecimal(exam.accuracy, 0, 2) + '%'}">0%</span><br>
                    <strong>Submitted:</strong>
                    <span th:text="${#dates.format(exam.submittedAt, 'dd MMM yyyy HH:mm')}">18 Jun 2025</span>
                </p>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(stats.recentExams)}" class="alert alert-info mt-6 text-center">
            No recent exams available.
        </div>
    </div>

</main>

<div th:replace="~{/participant/fragments/footer :: tag}"></div>

</body>

</html>
